<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="autonomous__driving_8py" kind="file" language="Python">
    <compoundname>autonomous_driving.py</compoundname>
    <innerclass refid="classautonomous__driving_1_1autonomous__driving" prot="public">autonomous_driving::autonomous_driving</innerclass>
    <innernamespace refid="namespaceautonomous__driving">autonomous_driving</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespaceautonomous__driving" refkind="compound"><highlight class="comment">#!<sp/>/usr/bin/env<sp/>python</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral">..<sp/>module::<sp/>autonomous_driving</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:platform:<sp/>Unix</highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:synopsis:<sp/>Python<sp/>module<sp/>for<sp/>autonomous<sp/>driving<sp/>modality.</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral">..<sp/>moduleauthor::<sp/>Ettore<sp/>Sani</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral">Action<sp/>client:</highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>/move_base<sp/>to<sp/>reach<sp/>a<sp/>desired<sp/>position<sp/>in<sp/>space.</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral">This<sp/>module<sp/>implements<sp/>the<sp/>autonomous<sp/>driving<sp/>modality,<sp/>which<sp/>allows<sp/>the<sp/>robot<sp/>to<sp/>reach<sp/>a<sp/>specified<sp/>position<sp/>in<sp/>space.</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral">The<sp/>program<sp/>sends<sp/>a<sp/>goal<sp/>to<sp/>the<sp/>action<sp/>server<sp/>/move_base,<sp/>receiving<sp/>feedbacks<sp/>and<sp/>monitoring<sp/>the<sp/>status<sp/>until<sp/>the<sp/>goal<sp/></highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral">is<sp/>reached<sp/>or<sp/>canceled.<sp/>Thanks<sp/>to<sp/>the<sp/>gmapping<sp/>algorithm,<sp/>the<sp/>robot<sp/>can<sp/>create<sp/>a<sp/>map<sp/>of<sp/>the<sp/>surrounding<sp/>environment<sp/></highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral">during<sp/>its<sp/>tours.<sp/>The<sp/>move_base<sp/>node<sp/>implements<sp/>the<sp/>action<sp/>server<sp/>to<sp/>control<sp/>the<sp/>robot<sp/>through<sp/>the<sp/>shortest<sp/>path<sp/>to<sp/></highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral">reach<sp/>the<sp/>given<sp/>position.<sp/>The<sp/>user<sp/>can<sp/>also<sp/>require<sp/>to<sp/>cancel<sp/>the<sp/>current<sp/>goal<sp/>or<sp/>to<sp/>send<sp/>a<sp/>new<sp/>one.</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Run<sp/>with:<sp/>roslaunch<sp/>final_assignment<sp/>assignment.launch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>rospy</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>actionlib</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>move_base_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>MoveBaseAction,<sp/>MoveBaseGoal</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="classautonomous__driving_1_1autonomous__driving" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving" kindref="compound">autonomous_driving</ref>:</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>class<sp/>manages<sp/>the<sp/>autonomous<sp/>driving<sp/>mode,<sp/>communicating<sp/>with<sp/></highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>the<sp/>/move_base<sp/>node<sp/>through<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="34"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving_1a4c61819883fb2485a86f5f13bd09e48f" kindref="member">__init__</ref>(self,<sp/>user_interface):</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>function<sp/>initialises<sp/>the<sp/>autonomous_driving<sp/>class.</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_interface(windows_organiser):<sp/>class<sp/>for<sp/>printing<sp/>on<sp/>the<sp/>user<sp/>interface.</highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref><sp/>=<sp/>0<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Stores<sp/>the<sp/>number<sp/>of<sp/>the<sp/>goal.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1acb3e1b8f356b2092dbd7ae207e52a37d" kindref="member">feedback_counter</ref><sp/>=<sp/>0<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Stores<sp/>the<sp/>number<sp/>of<sp/>feedback<sp/>received.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a4e04a1b3adfbb58e3cf158aa3f0eab70" kindref="member">is_active</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>True<sp/>if<sp/>it<sp/>is<sp/>reaching<sp/>a<sp/>goal.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Available<sp/>commands<sp/>is<sp/>autonomous<sp/>driving<sp/>is<sp/>active.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a18a60df18467d34ab24cbb826c937a7a" kindref="member">title</ref><sp/>=<sp/></highlight><highlight class="stringliteral">R&quot;&quot;&quot;<sp/><sp/><sp/><sp/>c<sp/>-<sp/>to<sp/>cancel<sp/>goal</highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>n<sp/>-<sp/>to<sp/>insert<sp/>a<sp/>new<sp/>goal&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Creates<sp/>the<sp/>MoveBaseAction<sp/>client.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1aaa73de6fbd6597d87d0fe6d2df453aa5" kindref="member">client</ref><sp/>=<sp/>actionlib.SimpleActionClient(</highlight><highlight class="stringliteral">&apos;/move_base&apos;</highlight><highlight class="normal">,<sp/>MoveBaseAction)</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Stores<sp/>the<sp/>windows_organiser<sp/>class<sp/>as<sp/>ui.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref><sp/>=<sp/>user_interface</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving_1a456ab1dfd528702f408ec7f1c6d2b3b7" kindref="member">active_cb</ref>(self):</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>function<sp/>executed<sp/>when<sp/>the<sp/>communication<sp/>starts.</highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="60"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref><sp/>+=<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Increments<sp/>the<sp/>goal<sp/>counter.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(2,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Action<sp/>Server<sp/>is<sp/>processing<sp/>goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>)+</highlight><highlight class="stringliteral">&quot;...<sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving_1a3721823d9057a324b954ba78695324f5" kindref="member">feedback_cb</ref>(self,<sp/>feedback):</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>function<sp/>is<sp/>executed<sp/>when<sp/>a<sp/>feedback<sp/>is<sp/>received.</highlight></codeline>
<codeline lineno="68"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="69"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1acb3e1b8f356b2092dbd7ae207e52a37d" kindref="member">feedback_counter</ref><sp/>+=<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Increments<sp/>the<sp/>feedback<sp/>counter.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Prints<sp/>on<sp/>the<sp/>info<sp/>window.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(3,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Feedback<sp/>for<sp/>goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>+1)+</highlight><highlight class="stringliteral">&quot;<sp/>received.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(3,<sp/>31<sp/>+<sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1acb3e1b8f356b2092dbd7ae207e52a37d" kindref="member">feedback_counter</ref><sp/>%<sp/>10,<sp/></highlight><highlight class="stringliteral">&quot;&gt;&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving_1ab8decfd71b3b6ffeb84485f2d0b6a424" kindref="member">done_cb</ref>(self,<sp/>status,<sp/>result):</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>function<sp/>is<sp/>executed<sp/>when<sp/>the<sp/>communication<sp/>ends.</highlight></codeline>
<codeline lineno="80"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="81"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="82"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status(int):<sp/>status<sp/>returned<sp/>by<sp/>the<sp/>action<sp/>server.</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a4e04a1b3adfbb58e3cf158aa3f0eab70" kindref="member">is_active</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>The<sp/>action<sp/>client<sp/>communication<sp/>is<sp/>not<sp/>active.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.clear_modes()<sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Clears<sp/>the<sp/>mode<sp/>windows,<sp/>c<sp/>and<sp/>n<sp/>commands<sp/>are<sp/>no<sp/>more<sp/>available.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Prints<sp/>on<sp/>the<sp/>info<sp/>window<sp/>the<sp/>status<sp/>returned<sp/>by<sp/>the<sp/>action<sp/>server<sp/>communication.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>2:</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(4,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>)+</highlight><highlight class="stringliteral">&quot;<sp/>received<sp/>a<sp/>cancel<sp/>request.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>3:</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(4,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>)+</highlight><highlight class="stringliteral">&quot;<sp/>reached.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>4:</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(4,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>)+</highlight><highlight class="stringliteral">&quot;<sp/>was<sp/>aborted.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>5:</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(4,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>)+</highlight><highlight class="stringliteral">&quot;<sp/>has<sp/>been<sp/>rejected.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>8:</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.addstr(4,<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;Goal<sp/>n<sp/>&quot;</highlight><highlight class="normal">+str(self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a273ff37835008f368520b0fb1ecf4553" kindref="member">goal_counter</ref>)+</highlight><highlight class="stringliteral">&quot;<sp/>received<sp/>a<sp/>cancel<sp/>request.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_info.refresh()</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving_1a6b4e43838d957feb311a66cb48310d85" kindref="member">reach_goal</ref>(self,<sp/>x,<sp/>y):</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>function<sp/>sends<sp/>a<sp/>goal<sp/>to<sp/>the<sp/>move<sp/>base<sp/>node,<sp/>starting<sp/>the<sp/>action<sp/>client<sp/>communication.</highlight></codeline>
<codeline lineno="116"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="117"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="118"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x(float):<sp/>x<sp/>goal<sp/>position<sp/>of<sp/>the<sp/>robot</highlight></codeline>
<codeline lineno="119"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y(float):<sp/>y<sp/>goal<sp/>position<sp/>of<sp/>the<sp/>robot</highlight></codeline>
<codeline lineno="120"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="121"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a4e04a1b3adfbb58e3cf158aa3f0eab70" kindref="member">is_active</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Processing<sp/>the<sp/>goal.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Waits<sp/>until<sp/>the<sp/>action<sp/>server<sp/>has<sp/>started.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1aaa73de6fbd6597d87d0fe6d2df453aa5" kindref="member">client</ref>.wait_for_server()</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Prints<sp/>the<sp/>new<sp/>commands<sp/>available<sp/>on<sp/>the<sp/>modes<sp/>window.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_modes.addstr(3,<sp/>0,<sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a18a60df18467d34ab24cbb826c937a7a" kindref="member">title</ref>)</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.win_modes.refresh()</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Creates<sp/>a<sp/>goal<sp/>to<sp/>send<sp/>to<sp/>the<sp/>action<sp/>server.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal<sp/>=<sp/>MoveBaseGoal()</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Fills<sp/>the<sp/>elements<sp/>of<sp/>the<sp/>goal.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.target_pose.header.frame_id<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;map&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.target_pose.header.stamp<sp/>=<sp/>rospy.Time.now()</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.target_pose.pose.orientation.w<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.target_pose.pose.position.x<sp/>=<sp/>x</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>goal.target_pose.pose.position.y<sp/>=<sp/>y</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Sends<sp/>the<sp/>goal<sp/>to<sp/>the<sp/>action<sp/>server.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1aaa73de6fbd6597d87d0fe6d2df453aa5" kindref="member">client</ref>.send_goal(goal,<sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ab8decfd71b3b6ffeb84485f2d0b6a424" kindref="member">done_cb</ref>,<sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a456ab1dfd528702f408ec7f1c6d2b3b7" kindref="member">active_cb</ref>,<sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a3721823d9057a324b954ba78695324f5" kindref="member">feedback_cb</ref>)</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classautonomous__driving_1_1autonomous__driving_1a28df164723b3b185879fec9454c2a9d0" kindref="member">cancel_goal</ref>(self):</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;This<sp/>function<sp/>sends<sp/>a<sp/>cancel<sp/>request<sp/>to<sp/>the<sp/>move_base<sp/>server.</highlight></codeline>
<codeline lineno="146"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1a4e04a1b3adfbb58e3cf158aa3f0eab70" kindref="member">is_active</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1aaa73de6fbd6597d87d0fe6d2df453aa5" kindref="member">client</ref>.<ref refid="classautonomous__driving_1_1autonomous__driving_1a28df164723b3b185879fec9454c2a9d0" kindref="member">cancel_goal</ref>()</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classautonomous__driving_1_1autonomous__driving_1ae54a15045c16368f6e54d0f9c4768f7f" kindref="member">ui</ref>.clear_modes()</highlight></codeline>
    </programlisting>
    <location file="scripts/autonomous_driving.py"/>
  </compounddef>
</doxygen>
