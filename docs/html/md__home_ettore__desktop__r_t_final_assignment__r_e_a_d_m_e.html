<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>driver_assistance project: Robotics simulator on ROS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">driver_assistance project
   </div>
   <div id="projectbrief">driver_assistance node in c++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Robotics simulator on ROS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>&gt;This ROS package aims to control an autonomous robot that wanders into an unknown map, equipped with a laser scanner and knowing its odometry.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Installing and running</h1>
<p>&gt;Clone this repository in the <code>src</code> folder of your ROS workspace, compile it with <code>catkin_make</code>; and run it with:</p>
<div class="fragment"><div class="line">$ roslaunch final_assignment assignment.launch</div>
</div><!-- fragment --><p>&gt;For compiling and running, you need the <code>xterm</code> package; you can install it with:</p>
<div class="fragment"><div class="line">$ sudo apt-get update</div>
<div class="line">$ sudo apt-get install xterm</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1"></a>
Assignment</h1>
<p>&gt;The objective of the assignment is to control the robot with three different driving modalities:</p><ul>
<li>Autonomous driving: the robot must reach a goal autonomously.</li>
<li>Free drive: the user controls the speed of the robot directly.</li>
<li>Drive assistance: the user moves the robot through a controller that prevents collisions.</li>
</ul>
<p>The node <code>driving_mode</code> switches between these different modalities, as specified by the user.</p>
<p>&gt;The Gazebo simulator reproduces the robot's behavior in the environment, publishing the output of the robot's sensors such as the laser scanner on the topic */scan*, and the odometry on the */odom* topic. The robot is controlled by publishing the velocity on the */cmd_vel* topic.</p>
<p>&gt;This is a general scheme of the nodes involved in the autonomous driving case:</p>
<p><img src="./images/rqt_graph.png" alt="" class="inline"/> </p>
<p>&gt;This is the communication structure between controller nodes:</p>
<p><img src="./images/nodes.jpg" alt="" width="60%" class="inline"/> </p>
<h2><a class="anchor" id="autotoc_md2"></a>
Autonomous driving</h2>
<p>&gt;For autonomously driving the robot, the program sends a goal to the action server */move_base*, receiving feedbacks and monitoring the status until the goal is reached or canceled. Thanks to the <em>gmapping</em> algorithm, the robot can create a map of the surrounding environment during its tours. The <code>move_base</code> node implements the action server to control the robot through the shortest path to reach the given position. The user can also require to cancel the current goal or to send a new one. The <code>driving_mode</code> node asks the user to insert the goal with the <code>ask_for_goal</code> function.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Free drive</h2>
<p>&gt;The function used to implement the free drive modality is in the <code>free_drive.py</code> file. It publishes the robot's speed on the topic */cmd_vel* each time the user inputs a command.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Driver assistance</h2>
<p>&gt;The driver assistance modality uses the <code>driver_assistance</code> node, described in the second assignment, slightly changed to be turned on and off when it is used or not. For this reason, the code of the node is written in C++. &gt;The <code>client_drive_assistance.py</code> file contains the function to send a request to the <code>driver_assistance</code> node through the Command service, defined in the <code>srv</code> folder.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
User interface</h2>
<p>&gt;The user interface of the program is in <code>user_interface.py</code>. It is implemented with the <em>curses</em> library, dividing the terminal into windows and calling specific functions to print strings and receive user inputs. The class <code>windows_organiser</code> stores all information about the user interface and implements some modes to make the code slighter.</p>
<p>&gt;This is the user interface for the autonomous driving modality:</p>
<p><img src="./images/modalities.png" alt="" width="40%" class="inline"/> </p>
<p>&gt;This is the user interface for the free drive and the drive assistance modalities:</p>
<p><img src="./images/wasd.png" alt="" width="40%" class="inline"/> </p>
<h2><a class="anchor" id="autotoc_md6"></a>
Global view</h2>
<p>&gt;This is a global view of the user interface and the environment in the simulation:</p>
<p><img src="./images/global_view.jpg" alt="" width="100%" class="inline"/> </p>
<ul>
<li><img src="https://via.placeholder.com/15/008000/000000?text=+" alt="#008000" class="inline"/> robot in the gazebo environment</li>
<li><img src="https://via.placeholder.com/15/FF0000/000000?text=+" alt="#FF0000" class="inline"/> sim-rviz robot sensors</li>
<li><img src="https://via.placeholder.com/15/FFFF00/000000?text=+" alt="#FFFF00" class="inline"/> user interface</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Possible improvements</h1>
<ul>
<li>Implements a modality to autonomously map all the environment.</li>
<li>Implements an emergency stop service. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
